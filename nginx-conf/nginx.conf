server {
        listen 80;
        listen [::]:80;

        root /var/www/html;
        index index.html index.htm index.nginx-debian.html;

        server_name properlife.app www.properlife.app;

        location / {
                proxy_pass http://pocketbase:8090;
        }

        location ~ /.well-known/acme-challenge {
                allow all;
                root /var/www/html;
        }
}



# server {
#     listen 80;
#     listen [::]:80;
#     server_name apps.mrc.org www.apps.mrc.org;

#     location ~ /.well-known/acme-challenge {
#         allow all;
#         root /var/www/html;
#     }

#     location / {
#         rewrite ^ https://$host$request_uri? permanent;
#     }
# }

# server {
#     listen 443 ssl http2;
#     listen [::]:443 ssl http2;
#     server_name apps.mrc.org www.apps.mrc.org;

#     server_tokens off;

#     ssl_certificate /etc/letsencrypt/live/apps.mrc.org/fullchain.pem;
#     ssl_certificate_key /etc/letsencrypt/live/apps.mrc.org/privkey.pem;

#     ssl_buffer_size 8k;

#     ssl_dhparam /etc/ssl/certs/dhparam-2048.pem;

#     ssl_protocols TLSv1.2 TLSv1.1 TLSv1;
#     ssl_prefer_server_ciphers on;

#     ssl_ciphers ECDH+AESGCM:ECDH+AES256:ECDH+AES128:DH+3DES:!ADH:!AECDH:!MD5;

#     ssl_ecdh_curve secp384r1;
#     ssl_session_tickets off;

#     ssl_stapling on;
#     ssl_stapling_verify on;
#     resolver 8.8.8.8;

    

#     # location ~ ^/tweetfinder/api/ {
#     #     try_files $uri $uri/ @tweetfinder_server;
#     # }

#     location ~ ^/build/api.* {
#         try_files $uri $uri/ @build_api;
#     }
#     location ~ ^/instaviews.* {
#         try_files $uri $uri/ @instaviews;
#     }
#     location ~ ^/tweetfinder.* {
#         try_files $uri $uri/ @tweetfinder_server;
#     }

#     location ~ ^/imgfinder.* {
#         try_files $uri $uri/ @imgfinder_server;
#     }

#     location ~ ^/(newsletter|_app).* {
#         try_files $uri $uri/ @sveltetools_server;
#     }
#     # location ~ ^/intranet/(api|auth) {
#     #     try_files $uri $uri/ @intranet_server;
#     # }
#     location ~ ^/intranet.* {
#         try_files $uri $uri/ @intranet_server;
#     }
#     location ~ ^/autotweet.*{
# 	    try_files $uri $uri/ @autotweeter;
#     }
#     location ~ ^/sundayreport.* {
#         try_files $uri $uri/ @sundayreport_server;
#     }
#     location ~ ^/thursdayreport.* {
#         try_files $uri $uri/ @thursdayreport_server;
#     }
#     location ~ ^/followdmer.* {
#         try_files $uri $uri/ @followdmer_server;
#     }
#     location ~ ^/massdm.* {
#         try_files $uri $uri/ @massdmer_server;
#     }
#     location ~ ^/twauth.* {
#         try_files $uri $uri/ @twauth_server;
#     }
#     location ~ ^/pdfuploader.* {
#         client_max_body_size 20M;
#         try_files $uri $uri/ @pdfuploader_server;
#     }
#     location ~ ^/autoretweet.* {
#         try_files $uri $uri/ @autoretweeter_server;
#     }
#     location ~ ^/searchbiasreport.* {
#         try_files $uri $uri/ @sbr_server;
#     }
#     location ~ ^/tweetarchive.* {
#         try_files $uri $uri/ @tweet_archive_server;
#     }
#     location ~ ^/mrcai.* {
#         try_files $uri $uri/ @chatgpt_demo_server;
#     }
#     location ~ ^/captions.* {
#         try_files $uri $uri/ @caption_suggestion_server;
#     }
#     location ~ ^/robinhood.* {
#         try_files $uri $uri/ @robinhood_client;
#     }
#     location ~ ^/contentdashboard/socketio.* {
#         try_files $uri $uri/ @content_dashboard_socket;
#     }
#     location ~ ^/contentdashboard/api.* {
#         try_files $uri $uri/ @content_dashboard_server;
#     }
#     location ~ ^/dvr.* {
#         try_files $uri $uri/ @dvrphp;
#     }
#     location ~ ^/contentdashboard.* {
#         try_files $uri $uri/ @content_dashboard_client;
#     }

#     location ~ ^/ukko/socketio.* {
#         try_files $uri $uri/ @ukko_socket;
#     }
#     location ~ ^/ukko/api/blog* {
#         try_files $uri $uri/ @ukko_server;
#     }
#     location ~ ^/ukko.* {
#         try_files $uri $uri/ @ukko_client;
#     }


#     location / {
#         try_files $uri /index.html;
#     }

#     location @ukko_client {
#         proxy_pass http://ukko_client:3000;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @ukko_server {
#         proxy_pass http://ukko_server:3001;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @ukko_socket {
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header Host $host;

#         proxy_pass http://ukko_server:3001;

#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection "upgrade";
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }

#     location @instaviews {
#         proxy_pass http://instaviews:3000;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @dvrphp {
#         proxy_pass http://php_app:80;
#         # Add the following lines for CORS headers
#         add_header 'Access-Control-Allow-Origin' '*' always;
#         add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, DELETE, PUT' always;
#         add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization' always;

#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @content_dashboard_client {
#         proxy_pass http://content_dashboard_svelte:3000;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @robinhood_client {
#         proxy_pass http://robinhood_client:3000;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @content_dashboard_server {
#         proxy_pass http://content_dashboard_server:3001;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @build_api {
#         proxy_pass http://build_api_server:3001;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @content_dashboard_socket {
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header Host $host;

#         proxy_pass http://content_dashboard_server:3001;

#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection "upgrade";
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }

#     location @tweet_archive_server {
#         proxy_pass http://tweet_archive:3000;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
    
#     location @autotweeter {
#         proxy_pass http://svelte_autotweeter:3000;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }

#     location @sbr_server {
#         proxy_pass http://server_sbr:3001;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }

#     location @autoretweeter_server {
#         proxy_pass http://server_autoretweeter:3001;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }

#     location @massdmer_server {
#         proxy_pass http://server_massdmer:3001;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @pdfuploader_server {
#         proxy_pass http://server_pdfuploader:3001;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @twauth_server {
#         proxy_pass http://server_twauth:5000;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }

   
#     location @followdmer_server {
#         proxy_pass http://account-activity-dashboard:5000;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @intranet_server {
#         proxy_pass http://server_intranet:3001;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @sundayreport_server {
#         proxy_pass http://server_sundayreport:3001;
#         proxy_read_timeout 15m;
#         proxy_connect_timeout 15m;
#         proxy_send_timeout 15m;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @thursdayreport_server {
#         proxy_pass http://server_thursdayreport:3001;
#         proxy_read_timeout 15m;
#         proxy_connect_timeout 15m;
#         proxy_send_timeout 15m;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @caption_suggestion_server {
#         proxy_pass http://caption_suggestion:3000;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }
#     location @sveltetools_server {
#         proxy_pass http://svelte_tools:3000;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }

#     location @imgfinder_server {
#         proxy_pass http://server_imgfind:3001;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }

#     location @tweetfinder_server {
#         proxy_pass http://recent_tweetfinder:3000;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#         # enable strict transport security only if you understand the implications
#     }

#     root /var/www/html;
#     index index.html index.htm index.nginx-debian.html;
# }

# server {
#     listen 80;
#     listen [::]:80;
#     server_name chat.mrc.org www.chat.mrc.org;

#     location ~ /.well-known/acme-challenge {
#         allow all;
#         root /var/www/html;
#     }

#     location / {
#         rewrite ^ https://$host$request_uri? permanent;
#     }
# }

# server {
#     listen 443 ssl http2;
#     listen [::]:443 ssl http2;
#     server_name chat.mrc.org www.chat.mrc.org;

#     server_tokens off;

#     ssl_certificate /etc/letsencrypt/live/apps.mrc.org/fullchain.pem;
#     ssl_certificate_key /etc/letsencrypt/live/apps.mrc.org/privkey.pem;

#     ssl_buffer_size 8k;

#     ssl_dhparam /etc/ssl/certs/dhparam-2048.pem;

#     ssl_protocols TLSv1.2 TLSv1.1 TLSv1;
#     ssl_prefer_server_ciphers on;

#     ssl_ciphers ECDH+AESGCM:ECDH+AES256:ECDH+AES128:DH+3DES:!ADH:!AECDH:!MD5;

#     ssl_ecdh_curve secp384r1;
#     ssl_session_tickets off;

#     ssl_stapling on;
#     ssl_stapling_verify on;
#     resolver 8.8.8.8;

    
#     location / {
#         proxy_pass http://api:3080;
#         add_header X-Frame-Options "SAMEORIGIN" always;
#         add_header X-XSS-Protection "1; mode=block" always;
#         add_header X-Content-Type-Options "nosniff" always;
#         add_header Referrer-Policy "no-referrer-when-downgrade" always;
#         add_header Content-Security-Policy "default-src * data: 'unsafe-eval' 'unsafe-inline'" always;
#         # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
#     }
    

#     root /var/www/html;
#     index index.html index.htm index.nginx-debian.html;
# }
